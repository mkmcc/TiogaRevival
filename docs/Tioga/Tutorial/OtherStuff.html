<!DOCTYPE html>

<html>
<head>
<meta charset="UTF-8">

<title>module Tioga::Tutorial::OtherStuff - RDoc Documentation</title>

<link href="../../fonts.css" rel="stylesheet">
<link href="../../rdoc.css" rel="stylesheet">

<script type="text/javascript">
  var rdoc_rel_prefix = "../../";
</script>

<script src="../../js/jquery.js"></script>
<script src="../../js/navigation.js"></script>
<script src="../../js/search_index.js"></script>
<script src="../../js/search.js"></script>
<script src="../../js/searcher.js"></script>
<script src="../../js/darkfish.js"></script>


<body id="top" role="document" class="module">
<nav role="navigation">
  <div id="project-navigation">
    <div id="home-section" role="region" title="Quick navigation" class="nav-section">
  <h2>
    <a href="../../index.html" rel="home">Home</a>
  </h2>

  <div id="table-of-contents-navigation">
    <a href="../../table_of_contents.html#pages">Pages</a>
    <a href="../../table_of_contents.html#classes">Classes</a>
    <a href="../../table_of_contents.html#methods">Methods</a>
  </div>
</div>

    <div id="search-section" role="search" class="project-section initially-hidden">
  <form action="OtherStuff.html#" method="get" accept-charset="utf-8">
    <div id="search-field-wrapper">
      <input id="search-field" role="combobox" aria-label="Search"
             aria-autocomplete="list" aria-controls="search-results"
             type="text" name="search" placeholder="Search" spellcheck="false"
             title="Type to search, Up and Down to navigate, Enter to load">
    </div>

    <ul id="search-results" aria-label="Search Results"
        aria-busy="false" aria-expanded="false"
        aria-atomic="false" class="initially-hidden"></ul>
  </form>
</div>

  </div>

  
<div class="nav-section">
  <h3>Table of Contents</h3>

  <ul class="link-list" role="directory">
    <li><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+1%3A+EPS+">How To&#39;s, Part 1: EPS </a>
    <li><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+2%3A+Embedded+Fonts">How To&#39;s, Part 2: Embedded Fonts</a>
    <li><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-What%27s+in+the+other+tioga%2Fsamples+folders+%28and+what%27s+a+%22zams%22+anyway%3F%29">What&#39;s in the other tioga/samples folders (and what&#39;s a “zams” anyway?)</a>
  </ul>
</div>


  <div id="class-metadata">
    
    
    
    
    
  </div>
</nav>

<main role="main" aria-labelledby="module-Tioga::Tutorial::OtherStuff">
  <h1 id="module-Tioga::Tutorial::OtherStuff" class="module">
    module Tioga::Tutorial::OtherStuff
  </h1>

  <section class="description">
    
<h1 id="module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+1%3A+EPS+">How To&#39;s, Part 1: EPS <span><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+1%3A+EPS+">&para;</a> <a href="OtherStuff.html#documentation">&uarr;</a></span></h1>

<p>Some publishers insist on eps format rather than pdf.  Luckily
&#39;pdftops&#39; makes this easy  (just add -eps to the command line). 
For the Mac, there is also a nice drag-and-drop converter called
“Droppdftoeps” available at <a
href="http://insti.physics.sunysb.edu/~siegel">insti.physics.sunysb.edu/~siegel</a>.</p>

<h1 id="module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+2%3A+Embedded+Fonts">How To&#39;s, Part 2: Embedded Fonts<span><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-How+To%27s%2C+Part+2%3A+Embedded+Fonts">&para;</a> <a href="OtherStuff.html#documentation">&uarr;</a></span></h1>

<p>Some publishers insist on having ALL fonts embedded, even the standard 14
Adobe fonts that are required to be available in all PostScript/PDF
implementations. Roy Mayfield provided a simple “one-liner” to take care of
this using GhostScript:</p>

<pre>gs -q -dNOPAUSE -dBATCH -dPDFSETTINGS=/prepress -sDEVICE=pdfwrite \
    -sOutputFile=output.pdf input.pdf</pre>

<p>Vincent Fourmond also provided a similar solution that uses an eps file
intermediate:</p>

<pre>pdftops -eps Plot.pdf
epstopdf --nogs Plot.eps | gs -q -sDEVICE=pdfwrite -dAutoRotatePages=/None \
   -dPDFSETTINGS=/prepress -sOutputFile=Plot_new.pdf -</pre>

<p>Don&#39;t forget the - at the end of the epstopdf command!</p>

<h1 id="module-Tioga::Tutorial::OtherStuff-label-What%27s+in+the+other+tioga%2Fsamples+folders+%28and+what%27s+a+%22zams%22+anyway%3F%29">What&#39;s in the other tioga/samples folders (and what&#39;s a “zams” anyway?)<span><a href="OtherStuff.html#module-Tioga::Tutorial::OtherStuff-label-What%27s+in+the+other+tioga%2Fsamples+folders+%28and+what%27s+a+%22zams%22+anyway%3F%29">&para;</a> <a href="OtherStuff.html#documentation">&uarr;</a></span></h1>

<p>We&#39;ve now been through the “figures” folder and the “plots” folder in
the samples.  The remaining ones are included as examples of “real” cases
using tioga to make plots.  The plots and the data they represent come from
my stellar evolution program, “<a
href="http://www.kitp.ucsb.edu/~paxton/#EZ">EZ</a>”. Here&#39;s the answer
to what&#39;s a “zams”:</p>
<dl class="rdoc-list label-list"><dt>
<dd>
<p>The “main sequence” is where stars spend most of their lives while they
burn hydrogen in their cores. The zero-age main sequence, “ZAMS”,
corresponds to stars that are just settling into their careers as hydrogen
burners after having formed from a collapsing gas cloud.</p>
</dd></dl>

<p>The name EZ stands for “Evolve ZAMS”, and the remaining samples are all
taken from the general topic of stellar evolution.  However, the point of
the samples is not to teach astrophysics, but to provide a set of more
complex plots to illustrate tioga.  We&#39;ll take a quick look at
what&#39;s there, and I&#39;ll point out a few highlights along the way.</p>

<p>The starting place is the “zero age” stars, so go to the “zams” folder in
“samples”, and open “zams.rb” in your editor.</p>

<p><img src="../../images/zams.png" /></p>

<p>Notice that we&#39;re plotting the same stuff for several different cases
corresponding to different “Z” values (astro jargon for the fraction of
mass in things other than hydrogen or helium).  Instead of 1 data set, we
have 4 sets with the same structure.  This is reflected in the code by a
new class definition, “ZAMS_Data”.  The ZAMS_Data class knows how to read a
set of data given a file name.  The code makes 4 instances of this class,
one for each of the data sets.  If we decide to add a 5th data set, it
simply means creating a fifth instance of the class.  The plotting routines
have iterators for doing each of the data objects.  For example, here are
the routines for plotting the center temperatures and the surface
temperatures:</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">temp_surface_plot</span>
    <span class="ruby-identifier">zams_plot</span>(<span class="ruby-string">&#39;log $T_{surface}$&#39;</span>, <span class="ruby-value">5.1</span>, <span class="ruby-value">3.2</span>) <span class="ruby-keyword">do</span>
        <span class="ruby-ivar">@zams_data_array</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">zams</span> = <span class="ruby-ivar">@zams_data_array</span>[<span class="ruby-identifier">i</span>]
            <span class="ruby-identifier">t</span>.<span class="ruby-identifier">show_polyline</span>(<span class="ruby-identifier">zams</span>.<span class="ruby-identifier">log_Ms</span>, <span class="ruby-identifier">zams</span>.<span class="ruby-identifier">log_Tsurfs</span>,
                <span class="ruby-ivar">@colors</span>[<span class="ruby-identifier">i</span>], <span class="ruby-ivar">@legends</span>[<span class="ruby-identifier">i</span>])
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>

<span class="ruby-keyword">def</span> <span class="ruby-identifier">temp_center_plot</span>
    <span class="ruby-identifier">zams_plot</span>(<span class="ruby-string">&#39;log $T_{center}$&#39;</span>, <span class="ruby-value">7.83</span>, <span class="ruby-value">6.45</span>) <span class="ruby-keyword">do</span>
        <span class="ruby-ivar">@zams_data_array</span>.<span class="ruby-identifier">each_index</span> <span class="ruby-keyword">do</span> <span class="ruby-operator">|</span><span class="ruby-identifier">i</span><span class="ruby-operator">|</span>
            <span class="ruby-identifier">zams</span> = <span class="ruby-ivar">@zams_data_array</span>[<span class="ruby-identifier">i</span>]
            <span class="ruby-identifier">t</span>.<span class="ruby-identifier">show_polyline</span>(<span class="ruby-identifier">zams</span>.<span class="ruby-identifier">log_Ms</span>, <span class="ruby-identifier">zams</span>.<span class="ruby-identifier">log_Tcents</span>,
                <span class="ruby-ivar">@colors</span>[<span class="ruby-identifier">i</span>], <span class="ruby-ivar">@legends</span>[<span class="ruby-identifier">i</span>])
        <span class="ruby-keyword">end</span>
    <span class="ruby-keyword">end</span>
<span class="ruby-keyword">end</span>
</pre>

<p>They both call the “zams_plot” routine in “zams.rb” with a title and y
boundaries as arguments followed by a block of code that loops through each
of the data sets calling show_polyline.</p>

<pre class="ruby"><span class="ruby-keyword">def</span> <span class="ruby-identifier">zams_plot</span>(<span class="ruby-identifier">ylabel</span>, <span class="ruby-identifier">ytop</span>, <span class="ruby-identifier">ybottom</span>, <span class="ruby-operator">&amp;</span><span class="ruby-identifier">cmd</span>)
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">xlabel</span> = <span class="ruby-string">&#39;Mass ($M_{\odot}$)&#39;</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">ylabel</span> = <span class="ruby-identifier">ylabel</span>
    <span class="ruby-identifier">xleft</span> =<span class="ruby-identifier">log10</span>(<span class="ruby-value">0.09</span>)
    <span class="ruby-identifier">xright</span> = <span class="ruby-identifier">log10</span>(<span class="ruby-value">101.0</span>)
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">xaxis_log_values</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">xaxis_use_fixed_pt</span> = <span class="ruby-keyword">true</span>
    <span class="ruby-identifier">t</span>.<span class="ruby-identifier">show_plot</span>(
        <span class="ruby-string">&#39;left_boundary&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xleft</span>,
        <span class="ruby-string">&#39;right_boundary&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">xright</span>,
        <span class="ruby-string">&#39;top_boundary&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ytop</span>,
        <span class="ruby-string">&#39;bottom_boundary&#39;</span> =<span class="ruby-operator">&gt;</span> <span class="ruby-identifier">ybottom</span>) { <span class="ruby-identifier">background</span>; <span class="ruby-identifier">cmd</span>.<span class="ruby-identifier">call</span> }
<span class="ruby-keyword">end</span>
</pre>

<p>The final item in the definition of the arguments for zams_plot is a new
one for us.  The “&amp;cmd” refers to the block of code in the caller.  The
command block is called on the last line as part of a show_plot.</p>

<p><img src="../../images/zams_fancy.png" /></p>

<p>The “ZAMS fancy” plot is mainly for fun.  But it gives examples of setting
up special tick labels as well as putting different information on each of
the four sides of the frame.  The background coloring is done with a call
on axial_shading using a specially built color map.  The gray dashed line
shows the main sequence line where the stars burn their hydrogen.  The
stars off the line are at later stages of development, such as the red
giant Betelgeuse and the white dwarf Procyon B.</p>

  </section>

  
  
  
  <section id="5Buntitled-5D" class="documentation-section">
    

    

    

    

    
  </section>
</main>


<footer id="validator-badges" role="contentinfo">
  <p><a href="http://validator.w3.org/check/referer">Validate</a>
  <p>Generated by <a href="http://rdoc.rubyforge.org">RDoc</a> 4.1.0.
  <p>Based on <a href="http://deveiate.org/projects/Darkfish-Rdoc/">Darkfish</a> by <a href="http://deveiate.org">Michael Granger</a>.
</footer>

